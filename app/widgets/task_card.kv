<TaskCard>:
    size_hint_y: None
    height: "88dp"
    radius: "12dp"
    md_bg_color: app.theme_cls.surfaceContainerLowestColor if not root.is_done else app.theme_cls.surfaceContainerColor
    elevation: 1
    
    MDBoxLayout:
        orientation: "horizontal"
        padding: "16dp", "12dp"
        spacing: "12dp"
        
        # Priority indicator (vertical colored bar)
        MDWidget:
            size_hint_x: None
            width: "4dp"
            canvas.before:
                Color:
                    rgba: root.get_priority_color()
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [2]
        
        # Status icon button (checkbox)
        MDIconButton:
            icon: "check-circle" if root.is_done else "circle-outline"
            theme_icon_color: "Custom"
            icon_color: app.theme_cls.primaryColor if root.is_done else app.theme_cls.onSurfaceVariantColor
            icon_size: "28sp"
            ripple_scale: 1.5
            size_hint_x: None
            width: "48dp"
            on_release: root.mark_done()
        
        # Task text content
        MDBoxLayout:
            orientation: "vertical"
            spacing: "4dp"
            padding: 0, "4dp"
            
            MDLabel:
                text: root.title
                font_style: "Body"
                role: "large"
                bold: True
                theme_text_color: "Custom"
                text_color: app.theme_cls.onSurfaceColor if not root.is_done else app.theme_cls.onSurfaceVariantColor
                opacity: 1 if not root.is_done else 0.6
                size_hint_y: None
                height: self.texture_size[1]
                text_size: self.width, None
                max_lines: 2
                shorten: True
                shorten_from: "right"
            
            MDLabel:
                text: root.subtitle
                font_style: "Body"
                role: "small"
                theme_text_color: "Secondary"
                size_hint_y: None
                height: self.texture_size[1]
                text_size: self.width, None
                max_lines: 1
                shorten: True
                shorten_from: "right"
        
        # Pin indicator (if pinned)
        MDIcon:
            icon: "pin"
            size_hint_x: None
            width: "24dp" if root.is_pinned else 0
            opacity: 1 if root.is_pinned else 0
            theme_icon_color: "Custom"
            icon_color: app.theme_cls.primaryColor
            icon_size: "20sp"
        
        # Edit button
        MDIconButton:
            icon: "pencil"
            icon_size: "24sp"
            theme_icon_color: "Custom"
            icon_color: app.theme_cls.primaryColor
            ripple_scale: 1.5
            size_hint_x: None
            width: "48dp"
            on_release: root.edit()
        
        # Delete button
        MDIconButton:
            icon: "trash-can-outline"
            icon_size: "24sp"
            theme_icon_color: "Custom"
            icon_color: app.theme_cls.errorColor
            ripple_scale: 1.5
            size_hint_x: None
            width: "48dp"
            on_release: root.delete()
